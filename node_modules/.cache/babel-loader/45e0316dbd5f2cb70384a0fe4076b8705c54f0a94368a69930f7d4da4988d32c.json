{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/guilh/Documents/GitHub/myblog/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/guilh/Documents/GitHub/myblog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/guilh/Documents/GitHub/myblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import useUser from'../hooks/useUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddCommentForm(_ref){var articleName=_ref.articleName,onArticleUpdated=_ref.onArticleUpdated;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),commentText=_useState4[0],setCommentText=_useState4[1];var _useUser=useUser(),user=_useUser.user;var addComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,headers,response,updatedArticle;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=user;if(!_context.t0){_context.next=5;break;}_context.next=4;return user.getIdToken();case 4:_context.t0=_context.sent;case 5:token=_context.t0;headers=token?{authToken:token}:{};_context.next=9;return axios.post(\"/api/articles/\".concat(articleName,\"/comments\"),{postedBy:name,text:commentText},{headers:headers});case 9:response=_context.sent;updatedArticle=response.data;onArticleUpdated(updatedArticle);setName('');setCommentText('');case 14:case\"end\":return _context.stop();}}},_callee);}));return function addComment(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"add-comment-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a Comment\"}),user&&/*#__PURE__*/_jsxs(\"p\",{children:[\"You are posting as \",user.email]}),/*#__PURE__*/_jsx(\"textarea\",{value:commentText,onChange:function onChange(e){return setCommentText(e.target.value);},rows:\"4\",cols:\"50\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addComment,children:\"Add Comment\"})]});}","map":{"version":3,"names":["useState","axios","useUser","AddCommentForm","articleName","onArticleUpdated","name","setName","commentText","setCommentText","user","addComment","getIdToken","token","headers","authToken","post","postedBy","text","response","updatedArticle","data","email","e","target","value"],"sources":["C:/Users/guilh/Documents/GitHub/myblog/src/components/AddCommentForm.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport useUser from '../hooks/useUser';\r\n\r\nexport default function AddCommentForm({ articleName, onArticleUpdated }) {\r\n    const [name, setName] = useState('');\r\n    const [commentText, setCommentText] = useState('');\r\n    const { user } = useUser()\r\n\r\n    const addComment = async () => {\r\n        const token = user && await user.getIdToken()\r\n        const headers = token ? { authToken: token } : {}\r\n        const response = await axios.post(`/api/articles/${articleName}/comments`, {\r\n            postedBy: name,\r\n            text: commentText,\r\n        }, { headers });\r\n        const updatedArticle = response.data;\r\n        onArticleUpdated(updatedArticle);\r\n        setName('');\r\n        setCommentText('');\r\n    }\r\n\r\n    return (\r\n        <div id=\"add-comment-form\">\r\n            <h3>Add a Comment</h3>\r\n            {user && <p>You are posting as {user.email}</p>}\r\n            <textarea\r\n                value={commentText}\r\n                onChange={e => setCommentText(e.target.value)}\r\n                rows=\"4\"\r\n                cols=\"50\" />\r\n            <button onClick={addComment}>Add Comment</button>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"oYAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,QAAO,KAAM,kBAAkB,CAAC,wFAEvC,cAAe,SAASC,eAAc,MAAoC,IAAjCC,YAAW,MAAXA,WAAW,CAAEC,gBAAgB,MAAhBA,gBAAgB,CAClE,cAAwBL,QAAQ,CAAC,EAAE,CAAC,wCAA7BM,IAAI,eAAEC,OAAO,eACpB,eAAsCP,QAAQ,CAAC,EAAE,CAAC,yCAA3CQ,WAAW,eAAEC,cAAc,eAClC,aAAiBP,OAAO,EAAE,CAAlBQ,IAAI,UAAJA,IAAI,CAEZ,GAAMC,WAAU,6FAAG,2LACDD,IAAI,+DAAUA,KAAI,CAACE,UAAU,EAAE,yCAAvCC,KAAK,aACLC,OAAO,CAAGD,KAAK,CAAG,CAAEE,SAAS,CAAEF,KAAM,CAAC,CAAG,CAAC,CAAC,uBAC1BZ,MAAK,CAACe,IAAI,yBAAkBZ,WAAW,cAAa,CACvEa,QAAQ,CAAEX,IAAI,CACdY,IAAI,CAAEV,WACV,CAAC,CAAE,CAAEM,OAAO,CAAPA,OAAQ,CAAC,CAAC,QAHTK,QAAQ,eAIRC,cAAc,CAAGD,QAAQ,CAACE,IAAI,CACpChB,gBAAgB,CAACe,cAAc,CAAC,CAChCb,OAAO,CAAC,EAAE,CAAC,CACXE,cAAc,CAAC,EAAE,CAAC,CAAC,uDACtB,kBAXKE,WAAU,2CAWf,CAED,mBACI,aAAK,EAAE,CAAC,kBAAkB,wBACtB,qCAAsB,CACrBD,IAAI,eAAI,2CAAuBA,IAAI,CAACY,KAAK,GAAK,cAC/C,iBACI,KAAK,CAAEd,WAAY,CACnB,QAAQ,CAAE,kBAAAe,CAAC,QAAId,eAAc,CAACc,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,CAC9C,IAAI,CAAC,GAAG,CACR,IAAI,CAAC,IAAI,EAAG,cAChB,eAAQ,OAAO,CAAEd,UAAW,yBAAqB,GAC/C,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}